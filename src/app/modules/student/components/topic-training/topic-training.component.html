<h1>Тема {{topic.title}}</h1>

<h3 *ngIf="isActual">Тема в стадии изучения</h3>
<h3 *ngIf="!isActual && isPast">Тема была пройдена</h3>
<h3 *ngIf="!isActual && !isPast">Предстоящая тема</h3>

<span>Описание</span>
<p>{{ topic.description }}</p>

<p>
    <span>Дедлайн: </span>
    <span>{{ 'course start date + topic duration days' }}</span>
</p>

<div class="content" [class.blocked]="!isActual">
    <p>
        <!-- {{ topic | json }} -->
    </p>

    <div *ngIf="topic.theory" class="section">
        <h2>Теория</h2>
        <p> {{ topic.theory }} </p>
    </div>
    
    <ng-container *ngIf="isActual || isPast">

        <div *ngIf="topic.materials && topic.materials.length > 0" class="section">
            <h2>Материалы к теме</h2>
            <app-upload-box 
                type="download" 
                [folder]="trainingMaterialsFolder"
                [controlId]="controlId"></app-upload-box>
        </div>

        <div *ngIf="topic.practice" class="section">
            <h2>Практика</h2>
            <div class="practice-container" *ngIf="topic.practice">
                <p>{{ topic.practice.goal }}</p>
                <div class="practice-tasks">
                    <h4>Задания</h4>
                    <div *ngFor="let task of topic.practice.tasks; let i = index" class="practice-task">
                        <app-training-task 
                            (send)="onSendTask($event)"
                            [task]="task"></app-training-task>
                    </div>

                    <ng-container *ngIf="personalTasks$ | async as personalTasks">
                        <h4>Личные задания</h4>
                        <div *ngFor="let task of personalTasks; let i = index" class="practice-task">
                            <app-training-task 
                            (send)="onSendTask($event)"
                            [task]="task"></app-training-task>
                        </div>
                    </ng-container>
                </div>
            </div>
        </div>

        <div *ngIf="topic.testLink" class="section">
            <h2>Ссылка на тест</h2>
            <div>
                <p>
                    Ваш уникальный ID тренинга: 
                </p>
                <span (click)="copyProfileIdToClipboard(profileIdTextElem)" 
                    class="copy-text training-test-id" 
                    #profileIdTextElem>
                    {{ profileId + '#' + topic.id }}
                </span>
                <button (click)="copyProfileIdToClipboard(profileIdTextElem)">Копировать</button>
            </div>
            <p>
                <a target="_blank" [href]="topic.testLink">Перейти</a>
            </p>
        </div>

    </ng-container>

</div>