<ng-container *ngIf="true">

    <p *ngIf="label">{{ label }}</p>
    <div  *ngIf="type === 'upload'" class="dropzone" appDnd (filesDropped)="onFilesDropped($event)">

        <div class="dropzone-wrapper">
            Отпустите файлы здесь.
        </div>
        <input class="file-input" type="file" [id]="fileInputId" multiple (change)="onChange($event)">

        <ng-container *ngIf="filesStore.size > 0; else emptyDropzone">    
            <div class="files-container">
                <app-file-item *ngFor="let file of filesStore.values()"
                    class="file-item"
                    [controlId]="controlId"
                    [userFile]="file.userFile"
                    [file]="file.uploadFile"
                    [folder]="folder"
                    (remove)="onRemove($event)"
                    (uploaded)="onUpload($event)"
                    type="upload">
                </app-file-item>
            </div>
            <label class="pick-files-btn" [for]="fileInputId">Добавить файлы</label>
        </ng-container>

    </div>
    
    <ng-container 
        [ngTemplateOutlet]="downloadZone"
        *ngIf="type === 'download'"></ng-container>

</ng-container>

<ng-template #downloadZone>
    <div class="files-container">
        <app-file-item *ngFor="let file of filesStore.values()"
            class="file-item" 
            [userFile]="file.userFile"
            (download)="onDownload($event)"
            type="download">
        </app-file-item>
    </div>
</ng-template>

<ng-template #emptyDropzone>
    <div class="files-container--empty">
        <h3>Для загрузки, перетащите файлы сюда.</h3>
        <p>или</p>
        <label class="pick-files-btn" [for]="fileInputId">Выберите файлы</label>
    </div>
</ng-template>

<ng-template #loader>
    <p>Loading...</p>
</ng-template>

<ng-template #noFiles>
    <p>Нет доступных файлов.</p>
</ng-template>